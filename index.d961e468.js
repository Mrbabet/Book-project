var e=globalThis,t={},o={},a=e.parcelRequired7c6;async function s(e){return'<li class="category-item js-current-category" data-category="All Categories">All Categories</li>'+e.data.map(({list_name:e})=>`<li class="category-item" data-category="${e}">${e}</li>`).join("")}async function n(e){return await Promise.all(e.map(async({list_name:e,books:t})=>`
    <div class="book-category-container">
    <h3 class="js-book-category">${e}</h3>
    <ul class='books-list'>${await r(t)}</ul>
    <button class="button see-more" data-js="${e}" aria-label="See more">See more</button>
    </div>
    `))}function i(){let e=window.screen.width;return(addEventListener("resize",()=>{(window.innerWidth>767&&e<768||window.innerWidth>1279&&e<1280||window.innerWidth<1279&&e>1280||window.innerWidth>1439&&e<1440||window.innerWidth<1439&&e>1440)&&location.reload()}),e<768)?"mobile":e<1280?"tablet":e<1440?"desktop":"desktopXl"}null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var a=o[e];delete o[e];var s={id:e,exports:{}};return t[e]=s,a.call(s.exports,s,s.exports),s.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},e.parcelRequired7c6=a),a.register,a("3gP5N");const r=async function(e){return"mobile"===i()?c(e.slice(0,1)):"tablet"===i()?c(e.slice(0,3)):"desktop"===i()?c(e.slice(0,4)):c(e)};async function l(e,t){let o=e.split(" "),a=Math.ceil(o.length/2),s=o.slice(0,a).join(" "),n=o.slice(a).join(" ");return`
  <h2 class="books-title">${s} <span class="books-colortitle">${n}</span></h2>
  <ul class="books-list">${await c(t)}</ul>
  <button class="button all-categories__btn" data-js="All Categories" aria-label="All categories">All Categories</button>
`}async function c(e){return e.map(({author:e,book_image:t,title:o,description:a,_id:s})=>`
    <li class="books__item" id=${s}>
      <div class="books__wrapper">
        <img class="books__image" src="${t}"  alt="${a}" loading="lazy"  />
        <div class="books__overlay">
          <p class="books__overlay-text">QUICK VIEW</p>
        </div>
      </div>
      <div class="books__info">
        <p class="books__info-title">${o}</p>
        <p class="books__info-author">${e}</p>
      </div>
    </li>
    `).join("")}async function d(e){let t=document.querySelector(".js-current-category");t&&t.classList.remove("js-current-category");let o=document.querySelector(`li[data-category="${e}"]`);o?o.classList.add("js-current-category"):console.error(`Element with category "${e}" not found.`)}var u=(a("3gP5N"),a("3gP5N")),g=a("46SdE"),y=a("58mXF");const m=document.getElementById("bookImage"),p=document.getElementById("bookTitle"),b=document.getElementById("bookAuthor"),h=document.getElementById("bookDescription"),k=document.querySelector(".link-amazon"),f=document.querySelector(".link-apple"),v=document.getElementById("toggleShoppingList"),L=document.querySelector(".toggle-shopping-list_anonymous-user-content");async function w(e){let{data:t}=await (0,u.getBookByID)(e);m.attributes.src.value=t.book_image,p.textContent=t.title,b.textContent=t.author,h.insertAdjacentHTML("beforeend",t.description),k.attributes.href.value=t.buy_links[0].url,f.attributes.href.value=t.buy_links[1].url,(0,g.onAuthStateChanged)(y.auth,e=>{e?(v.disabled=!1,L.style.display="none"):(v.disabled=!0,L.style.display="block")});let o=JSON.parse(localStorage.getItem("shoppingListArray")),a=!1;o&&(a=-1!==o.indexOf(e)),v.textContent=a?"Remove from the shopping list":"Add to the shopping list",v.onclick=()=>{o?((a=-1!==o.indexOf(e))?(o.splice(o.indexOf(e),1),localStorage.setItem("shoppingListArray",JSON.stringify(o)),v.textContent="Add to the shopping list"):(o.push(e),localStorage.setItem("shoppingListArray",JSON.stringify(o)),v.textContent="Remove from the shopping list"),0===o.length&&localStorage.removeItem("shoppingListArray")):(v.textContent="Remove from the shopping list",(o=[]).push(e),localStorage.setItem("shoppingListArray",JSON.stringify(o)))}}function _(e){let t=document.querySelector("[data-modal]");document.querySelector("[data-modal-window]");let o=document.querySelector("[data-modal-close]");e.target.closest("[data-modal-close]")===o&&(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",_),document.body.removeEventListener("keyup",S))}function S(e){let t=document.querySelector("[data-modal]");27==e.keyCode&&(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",_),document.body.removeEventListener("keyup",S))}const j=document.querySelector(".go-to-top");function A(){window.scrollTo({top:0,left:0,behavior:"smooth"})}j.style.display="none",j.addEventListener("click",A),window.addEventListener("scroll",function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?j.style.display="block":j.style.display="none"});const E=document.querySelector(".books-container"),T=document.querySelector(".category-list");!async function(){try{let e=await (0,u.getCategoryList)();T.insertAdjacentHTML("beforeend",await s(e))}catch(e){}try{let e=await (0,u.getTopBooks)();E.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>'),E.insertAdjacentHTML("beforeend",(await n(e.data)).join(""))}catch(e){}}();const C=async function(e){if(e.preventDefault(),e.target.classList.contains("category-item")){if(E.innerHTML="","All Categories"===e.target.dataset.category){try{let t=await (0,u.getTopBooks)();E.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>'),E.insertAdjacentHTML("beforeend",(await n(t.data)).join("")),d(e.target.dataset.category)}catch(e){}return}try{let{data:t}=await (0,u.getOneCategory)(e.target.dataset.category);E.insertAdjacentHTML("beforeend",await l(e.target.dataset.category,t)),d(e.target.dataset.category)}catch(e){}}},B=async function(e){e.preventDefault();let t=e.target.closest(".books__item");t&&(w(t.attributes.id.value),function(){let e=document.querySelector("[data-modal]");e.classList.add("is-active"),document.body.classList.add("no-scroll"),e.addEventListener("click",_),document.body.addEventListener("keyup",S)}());let o=e.target.classList.contains("see-more"),a=e.target.classList.contains("all-categories__btn"),s=e.target.dataset.js;if(o){A(),E.innerHTML="";try{let{data:e}=await (0,u.getOneCategory)(s);E.insertAdjacentHTML("beforeend",await l(s,e)),d(s)}catch(e){}}else if(a){A(),E.innerHTML="";try{E.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>');let e=await (0,u.getTopBooks)();E.insertAdjacentHTML("beforeend",(await n(e.data)).join("")),d(s)}catch(e){}}};T.addEventListener("click",C),E.addEventListener("click",B),a("9npD5"),a("3WmGK"),a("iB7wN"),a("8h5e4"),a("lMJiq"),a("58mXF"),a("5cjDG"),a("fHyLY");
//# sourceMappingURL=index.d961e468.js.map

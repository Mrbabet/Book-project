var e=globalThis,t={},o={},n=e.parcelRequired7c6;async function a(e){return'<li class="category-item js-current-category" data-category="All Categories">All Categories</li>'+e.data.map(({list_name:e})=>`<li class="category-item" data-category="${e}">${e}</li>`).join("")}async function s(e){return await Promise.all(e.map(async({list_name:e,books:t})=>`
    <div class="book-category-container">
    <h3 class="js-book-category">${e}</h3>
    <ul class='books-list'>${await i(t)}</ul>
    <button class="button see-more" data-js="${e}" aria-label="See more">See more</button>
    </div>
    `))}function r(){let e=window.screen.width;return e<768?"mobile":e<1280?"tablet":e<1440?"desktop":"desktopXl"}null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n),n.register,n("3gP5N");const i=async function(e){return"mobile"===r()?l(e.slice(0,1)):"tablet"===r()?l(e.slice(0,3)):"desktop"===r()?l(e.slice(0,4)):l(e)};async function c(e,t){let o=e.split(" "),n=Math.ceil(o.length/2),a=o.slice(0,n).join(" "),s=o.slice(n).join(" ");return`
  <h2 class="books-title">${a} <span class="books-colortitle">${s}</span></h2>
  <ul class="books-list">${await l(t)}</ul>
  <button class="button all-categories__btn" data-js="All Categories" aria-label="All categories">All Categories</button>
`}async function l(e){return e.map(({author:e,book_image:t,title:o,description:n,_id:a})=>`
    <li class="books__item" id=${a}>
      <div class="books__wrapper">
        <img class="books__image" src="${t}"  alt="${n}" loading="lazy"  />
        <div class="books__overlay">
          <p class="books__overlay-text">QUICK VIEW</p>
        </div>
      </div>
      <div class="books__info">
        <p class="books__info-title">${o}</p>
        <p class="books__info-author">${e}</p>
      </div>
    </li>
    `).join("")}async function d(e){let t=document.querySelector(".js-current-category");t&&t.classList.remove("js-current-category");let o=document.querySelector(`li[data-category="${e}"]`);o?o.classList.add("js-current-category"):console.error(`Element with category "${e}" not found.`)}var u=(n("3gP5N"),n("3gP5N")),y=n("46SdE"),g=n("2AKVI"),y=n("46SdE");document.querySelector(".form-wrapper");const m=document.querySelector(".submit-btn"),p=document.querySelector(".sign-up-form");document.querySelector(".au-modal-close");const b=document.querySelector("#name"),h=document.querySelector('input[type="email"]'),k=document.querySelector('input[type="password"]'),f=document.querySelector(".sign-in-btn"),v=document.querySelector(".sign-up-btn"),S=document.querySelector(".form-item-render"),L=document.getElementById("name"),w=document.querySelector(".sign-out-btn"),q=document.querySelector(".sign-out-container"),A=function(){m.textContent="Sign up",S.style.display="block"};p.addEventListener("submit",e=>{e.preventDefault(),m.textContent="Sign up";{let{value:e}=b,{value:t}=h,{value:o}=k;""!==t&&""!==o&&""!==e&&I(e,t,o)}m.textContent="Sign in";{let{value:e}=h,{value:t}=k;""!==e&&""!==t&&x(e,t)}p.reset(),A()}),w.addEventListener("click",function(){(0,y.signOut)(C).then(()=>{}).catch(e=>{})}),f.addEventListener("click",function(){m.textContent="Sign in",S.style.display="none",L.removeAttribute("required")}),v.addEventListener("click",A);var _=n("3dylo");const j=(0,g.initializeApp)({apiKey:"AIzaSyDIt6ClvCkB36kNCs8suIEnlzg23Or1UqU",authDomain:"book-project-8a976.firebaseapp.com",projectId:"book-project-8a976",storageBucket:"book-project-8a976.appspot.com",messagingSenderId:"595782127929",appId:"1:595782127929:web:e819e67d1654c476ec98e8"}),E=(0,_.getFirestore)(j),C=(0,y.getAuth)(),I=async function(e,t,o){try{(0,y.createUserWithEmailAndPassword)(C,t,o).then(async o=>{let n=o.user,a=(0,_.doc)(E,"users",n.uid);await (0,_.setDoc)(a,{username:e,email:t,shoppingListArray:[],userId:o.user.uid}),alert(`Your account: ${e} has been created`)})}catch(e){e.code,e.message}},x=async function(e,t){try{(0,y.signInWithEmailAndPassword)(C,e,t).then(async e=>{let t=e.user,o=new Date,n=(0,_.doc)((0,_.collection)(E,"users"),t.uid);await (0,_.updateDoc)(n,{last_login:o}),alert("Your logged in successfully")})}catch(e){console.log(e.code,e.message)}};(0,y.onAuthStateChanged)(C,e=>{e?(q.style.display="flex",console.log(E),console.log("User is signed in:",e)):(q.style.display="none",console.log("User is signed out"))});const B=document.getElementById("bookImage"),T=document.getElementById("bookTitle"),$=document.getElementById("bookAuthor"),M=document.getElementById("bookDescription"),O=document.querySelector(".link-amazon"),D=document.querySelector(".link-apple"),H=document.getElementById("toggleShoppingList"),N=document.querySelector(".toggle-shopping-list_anonymous-user-content");async function U(e){let{data:t}=await (0,u.getBookByID)(e);B.attributes.src.value=t.book_image,T.textContent=t.title,$.textContent=t.author,M.insertAdjacentHTML("beforeend",t.description),O.attributes.href.value=t.buy_links[0].url,D.attributes.href.value=t.buy_links[1].url,(0,y.onAuthStateChanged)(C,e=>{e?(H.disabled=!1,N.style.display="none"):(H.disabled=!0,N.style.display="block")});let o=JSON.parse(localStorage.getItem("shoppingListArray")),n=!1;o&&(n=-1!==o.indexOf(e)),H.textContent=n?"Remove from the shopping list":"Add to the shopping list",H.onclick=()=>{o?((n=-1!==o.indexOf(e))?(o.splice(o.indexOf(e),1),localStorage.setItem("shoppingListArray",JSON.stringify(o)),H.textContent="Add to the shopping list"):(o.push(e),localStorage.setItem("shoppingListArray",JSON.stringify(o)),H.textContent="Remove from the shopping list"),0===o.length&&localStorage.removeItem("shoppingListArray")):(H.textContent="Remove from the shopping list",(o=[]).push(e),localStorage.setItem("shoppingListArray",JSON.stringify(o)))}}function P(e){let t=document.querySelector("[data-modal]");document.querySelector("[data-modal-window]");let o=document.querySelector("[data-modal-close]");e.target.closest("[data-modal-close]")===o&&(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",P),document.body.removeEventListener("keyup",z))}function z(e){let t=document.querySelector("[data-modal]");27==e.keyCode&&(t.classList.remove("is-active"),document.body.classList.remove("no-scroll"),t.removeEventListener("click",P),document.body.removeEventListener("keyup",z))}function R(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const J=document.querySelector(".books-container"),K=document.querySelector(".category-list");!async function(){try{let e=await (0,u.getCategoryList)();K.insertAdjacentHTML("beforeend",await a(e))}catch(e){}try{let e=await (0,u.getTopBooks)();J.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>'),J.insertAdjacentHTML("beforeend",(await s(e.data)).join(""))}catch(e){}}();const W=async function(e){if(e.preventDefault(),e.target.classList.contains("category-item")){if(J.innerHTML="","All Categories"===e.target.dataset.category){try{let t=await (0,u.getTopBooks)();J.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>'),J.insertAdjacentHTML("beforeend",(await s(t.data)).join("")),d(e.target.dataset.category)}catch(e){}return}try{let{data:t}=await (0,u.getOneCategory)(e.target.dataset.category);J.insertAdjacentHTML("beforeend",await c(e.target.dataset.category,t)),d(e.target.dataset.category)}catch(e){}}},F=async function(e){e.preventDefault();let t=e.target.closest(".books__item");t&&(U(t.attributes.id.value),function(){let e=document.querySelector("[data-modal]");e.classList.add("is-active"),document.body.classList.add("no-scroll"),e.addEventListener("click",P),document.body.addEventListener("keyup",z)}());let o=e.target.classList.contains("see-more"),n=e.target.classList.contains("all-categories__btn"),a=e.target.dataset.js;if(o){R(),J.innerHTML="";try{let{data:e}=await (0,u.getOneCategory)(a);J.insertAdjacentHTML("beforeend",await c(a,e)),d(a)}catch(e){}}else if(n){R(),J.innerHTML="";try{J.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>');let e=await (0,u.getTopBooks)();J.insertAdjacentHTML("beforeend",(await s(e.data)).join("")),d(a)}catch(e){}}};K.addEventListener("click",W),J.addEventListener("click",F),n("9npD5"),n("3WmGK"),n("iB7wN"),n("8h5e4");const V=document.querySelector(".form-wrapper"),Y=document.querySelector(".sign-up"),G=document.querySelector(".au-modal-close");document.querySelector("#name"),document.querySelector('input[type="email"]'),document.querySelector('input[type="password"]'),V.style.display="none",Y.onclick=()=>void(V.style.display="block"),G.onclick=()=>void(V.style.display="none");
//# sourceMappingURL=index.c5a2524a.js.map

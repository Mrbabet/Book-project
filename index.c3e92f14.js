var t=globalThis,e={},o={},a=t.parcelRequired7c6;async function s(t){return'<li class="category-item js-current-category" data-category="All Categories">All Categories</li>'+t.data.map(({list_name:t})=>`<li class="category-item" data-category="${t}">${t}</li>`).join("")}async function n(t){return await Promise.all(t.map(async({list_name:t,books:e})=>`
    <div class="book-category-container">
    <h3 class="js-book-category">${t}</h3>
    <ul class='books-list'>${await r(e)}</ul>
    <button class="button see-more" data-js="${t}" aria-label="See more">See more</button>
    </div>
    `))}function i(){let t=window.screen.width;return t<768?"mobile":t<1280?"tablet":t<1440?"desktop":"desktopXl"}null==a&&((a=function(t){if(t in e)return e[t].exports;if(t in o){var a=o[t];delete o[t];var s={id:t,exports:{}};return e[t]=s,a.call(s.exports,s,s.exports),s.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){o[t]=e},t.parcelRequired7c6=a),a.register,a("3gP5N");const r=async function(t){return"mobile"===i()?c(t.slice(0,1)):"tablet"===i()?c(t.slice(0,3)):"desktop"===i()?c(t.slice(0,4)):c(t)};async function l(t,e){let o=t.split(" "),a=Math.ceil(o.length/2),s=o.slice(0,a).join(" "),n=o.slice(a).join(" ");return`
  <h2 class="books-title">${s} <span class="books-colortitle">${n}</span></h2>
  <ul class="books-list">${await c(e)}</ul>
  <button class="button all-categories__btn" data-js="All Categories" aria-label="All categories">All Categories</button>
`}async function c(t){return t.map(({author:t,book_image:e,title:o,description:a,_id:s})=>`
    <li class="books__item" id=${s}>
      <div class="books__wrapper">
        <img class="books__image" src="${e}"  alt="${a}" loading="lazy"  />
        <div class="books__overlay">
          <p class="books__overlay-text">QUICK VIEW</p>
        </div>
      </div>
      <div class="books__info">
        <p class="books__info-title">${o}</p>
        <p class="books__info-author">${t}</p>
      </div>
    </li>
    `).join("")}async function d(t){let e=document.querySelector(".js-current-category");e&&e.classList.remove("js-current-category");let o=document.querySelector(`li[data-category="${t}"]`);o?o.classList.add("js-current-category"):console.error(`Element with category "${t}" not found.`)}var u=(a("3gP5N"),a("3gP5N")),g=a("46SdE"),m=a("58mXF");const y=document.getElementById("bookImage"),p=document.getElementById("bookTitle"),b=document.getElementById("bookAuthor"),h=document.getElementById("bookDescription"),k=document.querySelector(".link-amazon"),f=document.querySelector(".link-apple"),v=document.getElementById("toggleShoppingList"),L=document.querySelector(".toggle-shopping-list_anonymous-user-content");async function _(t){let{data:e}=await (0,u.getBookByID)(t);y.attributes.src.value=e.book_image,p.textContent=e.title,b.textContent=e.author,h.insertAdjacentHTML("beforeend",e.description),k.attributes.href.value=e.buy_links[0].url,f.attributes.href.value=e.buy_links[1].url,(0,g.onAuthStateChanged)(m.auth,t=>{t?(v.disabled=!1,L.style.display="none"):(v.disabled=!0,L.style.display="block")});let o=JSON.parse(localStorage.getItem("shoppingListArray")),a=!1;o&&(a=-1!==o.indexOf(t)),v.textContent=a?"Remove from the shopping list":"Add to the shopping list",v.onclick=()=>{o?((a=-1!==o.indexOf(t))?(o.splice(o.indexOf(t),1),localStorage.setItem("shoppingListArray",JSON.stringify(o)),v.textContent="Add to the shopping list"):(o.push(t),localStorage.setItem("shoppingListArray",JSON.stringify(o)),v.textContent="Remove from the shopping list"),0===o.length&&localStorage.removeItem("shoppingListArray")):(v.textContent="Remove from the shopping list",(o=[]).push(t),localStorage.setItem("shoppingListArray",JSON.stringify(o)))}}function S(t){let e=document.querySelector("[data-modal]");document.querySelector("[data-modal-window]");let o=document.querySelector("[data-modal-close]");t.target.closest("[data-modal-close]")===o&&(e.classList.remove("is-active"),document.body.classList.remove("no-scroll"),e.removeEventListener("click",S),document.body.removeEventListener("keyup",w))}function w(t){let e=document.querySelector("[data-modal]");27==t.keyCode&&(e.classList.remove("is-active"),document.body.classList.remove("no-scroll"),e.removeEventListener("click",S),document.body.removeEventListener("keyup",w))}function j(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const A=document.querySelector(".books-container"),T=document.querySelector(".category-list");!async function(){try{let t=await (0,u.getCategoryList)();T.insertAdjacentHTML("beforeend",await s(t))}catch(t){}try{let t=await (0,u.getTopBooks)();A.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>'),A.insertAdjacentHTML("beforeend",(await n(t.data)).join(""))}catch(t){}}();const C=async function(t){if(t.preventDefault(),t.target.classList.contains("category-item")){if(A.innerHTML="","All Categories"===t.target.dataset.category){try{let e=await (0,u.getTopBooks)();A.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>'),A.insertAdjacentHTML("beforeend",(await n(e.data)).join("")),d(t.target.dataset.category)}catch(t){}return}try{let{data:e}=await (0,u.getOneCategory)(t.target.dataset.category);A.insertAdjacentHTML("beforeend",await l(t.target.dataset.category,e)),d(t.target.dataset.category)}catch(t){}}},E=async function(t){t.preventDefault();let e=t.target.closest(".books__item");e&&(_(e.attributes.id.value),function(){let t=document.querySelector("[data-modal]");t.classList.add("is-active"),document.body.classList.add("no-scroll"),t.addEventListener("click",S),document.body.addEventListener("keyup",w)}());let o=t.target.classList.contains("see-more"),a=t.target.classList.contains("all-categories__btn"),s=t.target.dataset.js;if(o){j(),A.innerHTML="";try{let{data:t}=await (0,u.getOneCategory)(s);A.insertAdjacentHTML("beforeend",await l(s,t)),d(s)}catch(t){}}else if(a){j(),A.innerHTML="";try{A.insertAdjacentHTML("afterbegin",'<h2 class="books-title">Best Sellers<span class="books-colortitle"> Books</span></h2>');let t=await (0,u.getTopBooks)();A.insertAdjacentHTML("beforeend",(await n(t.data)).join("")),d(s)}catch(t){}}};T.addEventListener("click",C),A.addEventListener("click",E),a("9npD5"),a("3WmGK"),a("iB7wN"),a("8h5e4"),a("lMJiq"),a("58mXF"),a("5cjDG");
//# sourceMappingURL=index.c3e92f14.js.map
